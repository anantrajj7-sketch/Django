{% extends "pmksy/base.html" %}

{% block title %}{{ wizard.title|default:wizard_name|default:"Import dataset" }} Â· PMKSY{% endblock %}

{% block content %}
<section class="intro">
  <h2>{{ wizard.title|default:wizard_name|default:"Import dataset" }}</h2>
  {% if wizard.description %}
    <p>{{ wizard.description }}</p>
  {% elif wizard_help %}
    <p>{{ wizard_help }}</p>
  {% endif %}
  {% if step_description %}
    <p class="muted">{{ step_description }}</p>
  {% endif %}
</section>
<form data-wizard-form method="post" enctype="multipart/form-data">
  {% csrf_token %}
  {% if wizard_step %}
    <input type="hidden" name="wizard_step" value="{{ wizard_step }}" />
  {% endif %}
  {% if form.non_field_errors %}
    <div class="form-errors">
      {% for error in form.non_field_errors %}
        <p class="error">{{ error }}</p>
      {% endfor %}
    </div>
  {% endif %}
  {% for field in form %}
    <div class="field{% if field.errors %} has-error{% endif %}">
      {{ field.label_tag }}
      {{ field }}
      {% if field.help_text %}
        <p class="muted">{{ field.help_text }}</p>
      {% endif %}
      {% for error in field.errors %}
        <p class="error">{{ error }}</p>
      {% endfor %}
    </div>
  {% endfor %}
  <div class="actions">
    {% if prev_url %}
      <a class="btn" href="{{ prev_url }}">Back</a>
    {% endif %}
    <button type="submit" class="btn">{{ continue_label|default:"Continue" }}</button>
  </div>
</form>
{% if preview_rows %}
  <section class="preview">
    <h3>Preview</h3>
    <div class="table-scroll">
      <table>
        {% if preview_headers %}
          <thead>
            <tr>
              {% for header in preview_headers %}
                <th>{{ header }}</th>
              {% endfor %}
            </tr>
          </thead>
        {% endif %}
        <tbody>
          {% for row in preview_rows %}
            <tr>
              {% for cell in row %}
                <td>{{ cell }}</td>
              {% endfor %}
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </section>
{% endif %}
{% endblock %}
